<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Hx_Internal_NetFindProjects" Outputs="@(_Hx_Internal_NetFindProjects_ProjectFiles)">

    <Heleonix.Build.Tasks.FileRead
      File="$(Hx_Internal_NetFindProjects_SlnFile)"
      RegExp="(?&lt;=Project.+=\s*&quot;.+&quot;\s*,\s*&quot;)(.+proj)(?=&quot;\s*,\s*&quot;.+&quot;\s*EndProject)">
      <Output TaskParameter="Matches" ItemName="_Hx_Internal_NetFindProjects_ParsedProjectFiles"/>
    </Heleonix.Build.Tasks.FileRead>

    <PropertyGroup>
      <_Hx_Internal_NetFindProjects_SlnDir>$([System.IO.Path]::GetDirectoryName('$(Hx_Internal_NetFindProjects_SlnFile)'))</_Hx_Internal_NetFindProjects_SlnDir>
    </PropertyGroup>

    <ItemGroup>
      <_Hx_Internal_NetFindProjects_ProjectFiles Include="@(_Hx_Internal_NetFindProjects_ParsedProjectFiles->'$(_Hx_Internal_NetFindProjects_SlnDir)/%(Match)')"/>
    </ItemGroup>

    <OnError ExecuteTargets="Hx_OnError"/>
  </Target>
</Project>