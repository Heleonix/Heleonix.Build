<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="Hx_ReportGenerator">
    <Message Text="> RUNNING Hx_ReportGenerator ..." Importance="high"/>

    <Message Text="> 1/2: Creating the artifacts directory" Importance="high"/>
    <RemoveDir Directories="$(Hx_ReportGenerator_ArtifactsDir)"/>
    <MakeDir Directories="$(Hx_ReportGenerator_ArtifactsDir)"/>

    <PropertyGroup>
      <Hx_ReportGenerator_ReportTypes Condition="'$(Hx_ReportGenerator_ReportTypes)' == ''">Badges;Html</Hx_ReportGenerator_ReportTypes>
    </PropertyGroup>

    <ItemGroup>
      <Hx_ReportGenerator_CoverageResultFiles
        Condition="'@(Hx_ReportGenerator_CoverageResultFiles)' == ''"
        Include="$(Hx_OpenCover_ArtifactsDir)/OpenCover.xml"/>
    </ItemGroup>

    <Message Text="> 2/2: Generating reports" Importance="high"/>
    <Heleonix.Build.Tasks.ReportGenerator
      ReportGeneratorExe="$(Hx_Sys_ReportGeneratorExe)"
      ResultFiles="@(Hx_ReportGenerator_CoverageResultFiles)"
      ReportDir="$(Hx_ReportGenerator_ArtifactsDir)"
      ReportTypes="$(Hx_ReportGenerator_ReportTypes)"
      Verbosity="$(Hx_ReportGenerator_Verbosity)"
      WorkingDir="$(Hx_WS_Dir)"/>

    <Message Text="> DONE Hx_ReportGenerator" Importance="high"/>

    <OnError ExecuteTargets="Hx_OnError"/>
  </Target>
</Project>